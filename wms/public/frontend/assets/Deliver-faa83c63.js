var k=(h,s,r)=>new Promise((u,p)=>{var f=i=>{try{l(r.next(i))}catch(c){p(c)}},_=i=>{try{l(r.throw(i))}catch(c){p(c)}},l=i=>i.done?u(i.value):Promise.resolve(i.value).then(f,_);l((r=r.apply(h,s)).next())});import{a as D,b as w,i as b,c as v,a7 as I,e as C,x as g,l as y,a8 as d,f as m,v as o,k as n,t as S,$ as Q,j as L,E as U,G as z,n as $,q,I as x,F as G}from"./frappe-ui-cec019df.js";import M from"./ShippingSummary-ed7e3346.js";import O from"./QuickLinks-6574cfa1.js";import H from"./BaseLayout-ecda517c.js";import J from"./TabButtons-8724663b.js";import{_ as P}from"./RequestList-787fbb4d.js";import{m as K,t as R}from"./leaves-3a895d25.js";import{m as W,t as T}from"./claims-a7e597d7.js";import V from"./LeaveRequestItem-5f50263b.js";import B from"./ExpenseClaimItem-25e12d04.js";import{u as N}from"./realtime-0afd5b43.js";import{a as X}from"./axios-fc3df026.js";import"./index-0e5fa8f2.js";import"./notifications-0a235be6.js";/* empty css                                                   */import"./EmployeeAvatar-0fff1228.js";import"./RequestActionSheet.vue_vue_type_style_index_0_scoped_5369b918_lang-32e4c0e0.js";import"./formatters-e2b36d58.js";import"./LeaveIcon-4c02e396.js";import"./ExpenseIcon-2fe0be86.js";const Y={class:"flex flex-col items-center my-7 p-4 gap-7"},Z={class:"w-full"},ee={class:"w-full"},te={class:"flex flex-col gap-5 my-4 w-full"},se={class:"flex flex-col bg-white rounded"},ae=["onClick"],oe={class:"flex flex-row items-center gap-3 grow"},ie={class:"text-xs font-normal text-gray-800 leading-6"},le={id:"circle"},Pe={__name:"Deliver",setup(h){const s=D("Pending Deliveries");w(()=>{console.log("RequestPanel.vue is mounted")});const r=t=>{s.value=t,emit("tab-clicked",t)},u=b("$socket");b("$employee");const p=v(()=>[...K.data||[],...W.data||[]].map(e=>(e.doctype==="Leave Application"?e.component=d(V):e.doctype==="Expense Claim"&&(e.component=d(B)),e))),f=v(()=>[...R.data||[],...T.data||[]].map(e=>(e.doctype==="Leave Application"?e.component=d(V):e.doctype==="Expense Claim"&&(e.component=d(B)),e)));w(()=>{N(u,"Leave Application",()=>R.reload()),N(u,"Expense Claim",()=>T.reload())});const _=[{title:"Print Delivery Labels",route:"LeaveApplicationFormView"},{title:"Pending Delivery Pick lists",route:"QualityInspection"},{title:"Pending Delivery Packing Slips",route:"StockEntryList"}];let l=D([]);(()=>k(this,null,function*(){try{const t=yield X.get("/api/method/wms.api.my_api.get_purchase_receipt",{});l.value=t.data.message,console.log("data",l.value)}catch(t){console.log("error while fetching data",error.response)}}))();const c=v(()=>{const t=l.value||[];return console.log("activeTab",s.value),s.value==="Pending Deliveries"?t.filter(e=>e.status==="Draft"):s.value==="Completed Deliveries"?t.filter(e=>e.status==="To Bill"):t}),E=I(),A=t=>{t.status==="Draft"&&E.push("/FormView")};return(t,e)=>{const F=C("Button"),j=C("router-link");return m(),g(H,{pageTitle:"Deliver"},{body:y(()=>[o("div",Y,[n(M),o("div",Z,[n(j,{to:{name:"NewDelivery"}},{default:y(({navigate:a})=>[n(F,{onClick:a,variant:"solid",class:"w-full py-5 text-base font-bold"},{default:y(()=>[S(" New Delivery Note ")]),_:2},1032,["onClick"])]),_:1})]),n(O,{items:_,title:"Quick Links"}),o("div",ee,[n(J,{buttons:[{label:"Pending Deliveries"},{label:"Completed Deliveries"}],modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),onTabClicked:r},null,8,["modelValue"]),s.value==="Pending Deliveries"?(m(),g(P,{key:0,items:p.value},null,8,["items"])):s.value==="Completed Deliveries"?(m(),g(P,{key:1,items:f.value,teamRequests:!0},null,8,["items"])):Q("",!0)]),o("div",te,[o("div",se,[(m(!0),L(G,null,U(c.value,a=>(m(),L("div",{id:"basedOnActiveTabs",class:z(["flex flex-row flex-start p-4 items-center justify-between border-b",{"clickable-div":a.status==="Draft"}]),key:a.id,onClick:ne=>A(a)},[o("div",oe,[n($(q),{name:"shopping-cart",class:"h-5 w-5 text-gray-500"}),o("div",ie,[o("p",null,x(a.name),1),o("p",null,x(a.posting_date)+"|20% Received",1)]),o("div",le,x(a.status),1)]),n($(q),{name:"chevron-right",class:"h-5 w-5 text-gray-500"})],10,ae))),128))])])])]),_:1})}}};export{Pe as default};
