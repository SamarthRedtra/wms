import{A as E,r as k,B as f,R as M,P as N,q as O,E as T,o,i as b,n as V,t as B,f as g,b as r,aJ as i,u as m,ad as Y,a8 as h,g as j,aK as A}from"./index-c4230fc7.js";import{E as R}from"./ErrorMessage-5160fa56.js";const P={key:0,class:"flex flex-col gap-1.5"},q={__name:"FormField",props:{fieldtype:String,fieldname:String,modelValue:[String,Number,Boolean,Array,Object],default:[String,Number,Boolean,Array,Object],label:String,options:[String,Array],linkFilters:Object,documentList:Array,readOnly:[Boolean,Number],reqd:[Boolean,Number],hidden:{type:[Boolean,Number],default:!1},errorMessage:String,minDate:String,maxDate:String,addSectionPadding:{type:Boolean,default:!0}},emits:["change","update:modelValue"],setup(s,{emit:t}){const e=s,c=E("$dayjs");let y=k(null);const v=k(null),S=k(""),$=f(()=>e.readOnly&&!D.value&&!e.modelValue?!1:e.fieldtype!=="Table"&&!e.hidden),C=f(()=>["Int","Float","Currency"].includes(e.fieldtype)),D=f(()=>["Section Break","Column Break"].includes(e.fieldtype)),d=f(()=>!!e.readOnly),F=f(()=>e.fieldtype=="Link"&&e.options?e.documentList||(p==null?void 0:p.data):e.fieldtype=="Select"&&e.options?e.options.split(`
`).map(l=>({label:l,value:l})):[]),p=M({url:"frappe.desk.search.search_link",params:{doctype:e.options,txt:S.value,filters:e.linkFilters},transform:n=>n.map(l=>{var a,x;const u=(x=(a=l==null?void 0:l.description)==null?void 0:a.split(","))==null?void 0:x[0];return{label:u?`${u} : ${l.value}`:l.value,value:l.value}})});function I(){e.modelValue||(e.default?e.fieldtype==="Check"?t("update:modelValue",e.default==="1"):e.fieldtype==="Date"&&e.default==="Today"?t("update:modelValue",c().format("YYYY-MM-DD")):C.value?t("update:modelValue",parseFloat(e.default||0)):t("update:modelValue",e.default):e.fieldtype==="Check"?t("update:modelValue",!1):t("update:modelValue",""))}const L=A(n=>{S.value=n||"",p.reload()},500);return N(()=>{var n,l,u,a;v.value&&e.fieldtype==="Link"&&((a=(u=(l=(n=v.value)==null?void 0:n.$refs)==null?void 0:l.search)==null?void 0:u.$el)==null||a.addEventListener("focus",()=>{p.reload()}))}),O(()=>{I()}),(n,l)=>{const u=T("Input");return $.value?(o(),b("div",P,[["Check","Section Break","Column Break"].includes(e.fieldtype)?g("",!0):(o(),b("span",{key:0,class:V([e.reqd?"after:content-['_*'] after:text-red-600":"","block text-sm leading-5 text-gray-700"])},B(e.label),3)),["Link","Select"].includes(e.fieldtype)?(o(),r(m(Y),i({key:1,ref_key:"autocompleteRef",ref:v,class:d.value?"pointer-events-none":"",value:s.modelValue,placeholder:`Select ${e.options}`,options:F.value,onChange:l[0]||(l[0]=a=>t("update:modelValue",a==null?void 0:a.value)),"onUpdate:query":l[1]||(l[1]=a=>m(L)(a))},n.$attrs,{disabled:d.value}),null,16,["class","value","placeholder","options","disabled"])):["Text Editor","Small Text","Text","Long Text"].includes(e.fieldtype)?(o(),r(u,i({key:2,type:"textarea",value:s.modelValue,placeholder:`Enter ${e.label}`,onInput:l[2]||(l[2]=a=>t("update:modelValue",a)),onChange:l[3]||(l[3]=a=>t("change",a))},n.$attrs,{disabled:d.value,class:"h-15"}),null,16,["value","placeholder","disabled"])):e.fieldtype==="Check"?(o(),r(u,i({key:3,type:"checkbox",label:e.label,value:s.modelValue,onInput:l[4]||(l[4]=a=>t("update:modelValue",a)),onChange:l[5]||(l[5]=a=>t("change",a))},n.$attrs,{disabled:d.value,class:"rounded-sm text-gray-800"}),null,16,["label","value","disabled"])):e.fieldtype==="Data"?(o(),r(u,i({key:4,type:"text",value:s.modelValue,onInput:l[6]||(l[6]=a=>t("update:modelValue",a)),onChange:l[7]||(l[7]=a=>t("change",a))},n.$attrs,{disabled:d.value}),null,16,["value","disabled"])):e.fieldtype==="Currency"&&d.value?(o(),r(u,i({key:5,type:"text",value:s.modelValue,onInput:l[8]||(l[8]=a=>t("update:modelValue",a)),onChange:l[9]||(l[9]=a=>t("change",a))},n.$attrs,{disabled:d.value}),null,16,["value","disabled"])):C.value?(o(),r(u,i({key:6,type:"number",value:s.modelValue,onInput:l[10]||(l[10]=a=>t("update:modelValue",a)),onChange:l[11]||(l[11]=a=>t("change",a))},n.$attrs,{disabled:d.value}),null,16,["value","disabled"])):e.fieldtype==="Section Break"?(o(),b("div",{key:7,class:V(e.addSectionPadding?"mt-2":"")},[e.label?(o(),b("h2",{key:0,class:V(["text-base font-semibold text-gray-800",e.addSectionPadding?"pt-4":""])},B(e.label),3)):g("",!0)],2)):e.fieldtype==="Date"?(o(),r(u,i({key:8,type:"date",modelValue:m(y),"onUpdate:modelValue":l[12]||(l[12]=a=>h(y)?y.value=a:y=a),value:s.modelValue,placeholder:`Select ${e.label}`,formatValue:a=>m(c)(a).format("DD-MM-YYYY"),onInput:l[13]||(l[13]=a=>t("update:modelValue",a)),onChange:l[14]||(l[14]=a=>t("change",a))},n.$attrs,{disabled:d.value,min:e.minDate,max:e.maxDate}),null,16,["modelValue","value","placeholder","formatValue","disabled","min","max"])):g("",!0),j(m(R),{message:e.errorMessage},null,8,["message"])])):g("",!0)}}},z=q;export{z as default};
