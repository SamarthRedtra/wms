var D=(h,s,r)=>new Promise((u,p)=>{var f=i=>{try{l(r.next(i))}catch(c){p(c)}},_=i=>{try{l(r.throw(i))}catch(c){p(c)}},l=i=>i.done?u(i.value):Promise.resolve(i.value).then(f,_);l((r=r.apply(h,s)).next())});import{r as k,q as w,A as C,B as v,C as S,E as b,b as g,w as y,G as d,o as m,d as o,g as n,e as I,f as Q,i as L,j as U,n as z,u as $,x as q,t as x,F as G}from"./index-c4230fc7.js";import M from"./ShippingSummary-36ebb77a.js";import O from"./QuickLinks-dc5249c4.js";import H from"./BaseLayout-e39ea2b2.js";import J from"./TabButtons-23fbfbd6.js";import{_ as P}from"./RequestList-7cef86bf.js";import{m as K,t as B}from"./leaves-8e583431.js";import{m as W,t as R}from"./claims-af4fcd56.js";import T from"./LeaveRequestItem-6b4ee68b.js";import V from"./ExpenseClaimItem-fdc25794.js";import{u as N}from"./realtime-1b832505.js";import{a as X}from"./axios-fc3df026.js";import"./notifications-765e05d1.js";/* empty css                                                   */import"./Badge.vue_vue_type_script_setup_true_lang-1668e2d0.js";import"./EmployeeAvatar-266dc3d2.js";import"./RequestActionSheet.vue_vue_type_style_index_0_scoped_5369b918_lang-896a1073.js";import"./formatters-34ed679f.js";import"./LeaveIcon-a78a48d2.js";import"./ExpenseIcon-a89faa9d.js";const Y={class:"flex flex-col items-center my-7 p-4 gap-7"},Z={class:"w-full"},ee={class:"w-full"},te={class:"flex flex-col gap-5 my-4 w-full"},se={class:"flex flex-col bg-white rounded"},ae=["onClick"],oe={class:"flex flex-row items-center gap-3 grow"},ie={class:"text-xs font-normal text-gray-800 leading-6"},le={id:"circle"},Pe={__name:"Deliver",setup(h){const s=k("Pending Deliveries");w(()=>{console.log("RequestPanel.vue is mounted")});const r=t=>{s.value=t,emit("tab-clicked",t)},u=C("$socket");C("$employee");const p=v(()=>[...K.data||[],...W.data||[]].map(e=>(e.doctype==="Leave Application"?e.component=d(T):e.doctype==="Expense Claim"&&(e.component=d(V)),e))),f=v(()=>[...B.data||[],...R.data||[]].map(e=>(e.doctype==="Leave Application"?e.component=d(T):e.doctype==="Expense Claim"&&(e.component=d(V)),e)));w(()=>{N(u,"Leave Application",()=>B.reload()),N(u,"Expense Claim",()=>R.reload())});const _=[{title:"Print Delivery Labels",route:"LeaveApplicationFormView"},{title:"Pending Delivery Pick lists",route:"QualityInspection"},{title:"Pending Delivery Packing Slips",route:"StockEntryList"}];let l=k([]);(()=>D(this,null,function*(){try{const t=yield X.get("/api/method/wms.api.my_api.get_purchase_receipt",{});l.value=t.data.message,console.log("data",l.value)}catch(t){console.log("error while fetching data",error.response)}}))();const c=v(()=>{const t=l.value||[];return console.log("activeTab",s.value),s.value==="Pending Deliveries"?t.filter(e=>e.status==="Draft"):s.value==="Completed Deliveries"?t.filter(e=>e.status==="To Bill"):t}),A=S(),E=t=>{t.status==="Draft"&&A.push("/FormView")};return(t,e)=>{const F=b("Button"),j=b("router-link");return m(),g(H,{pageTitle:"Deliver"},{body:y(()=>[o("div",Y,[n(M),o("div",Z,[n(j,{to:{name:"NewDelivery"}},{default:y(({navigate:a})=>[n(F,{onClick:a,variant:"solid",class:"w-full py-5 text-base font-bold"},{default:y(()=>[I(" New Delivery Note ")]),_:2},1032,["onClick"])]),_:1})]),n(O,{items:_,title:"Quick Links"}),o("div",ee,[n(J,{buttons:[{label:"Pending Deliveries"},{label:"Completed Deliveries"}],modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),onTabClicked:r},null,8,["modelValue"]),s.value==="Pending Deliveries"?(m(),g(P,{key:0,items:p.value},null,8,["items"])):s.value==="Completed Deliveries"?(m(),g(P,{key:1,items:f.value,teamRequests:!0},null,8,["items"])):Q("",!0)]),o("div",te,[o("div",se,[(m(!0),L(G,null,U(c.value,a=>(m(),L("div",{id:"basedOnActiveTabs",class:z(["flex flex-row flex-start p-4 items-center justify-between border-b",{"clickable-div":a.status==="Draft"}]),key:a.id,onClick:ne=>E(a)},[o("div",oe,[n($(q),{name:"shopping-cart",class:"h-5 w-5 text-gray-500"}),o("div",ie,[o("p",null,x(a.name),1),o("p",null,x(a.posting_date)+"|20% Received",1)]),o("div",le,x(a.status),1)]),n($(q),{name:"chevron-right",class:"h-5 w-5 text-gray-500"})],10,ae))),128))])])])]),_:1})}}};export{Pe as default};
