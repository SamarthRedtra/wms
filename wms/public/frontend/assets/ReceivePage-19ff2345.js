var P=(k,a,r)=>new Promise((s,m)=>{var _=o=>{try{u(r.next(o))}catch(l){m(l)}},w=o=>{try{u(r.throw(o))}catch(l){m(l)}},u=o=>o.done?s(o.value):Promise.resolve(o.value).then(_,w);u((r=r.apply(k,a)).next())});import{a as g,b as N,c as h,a7 as F,e as C,x,l as b,f as d,v as t,k as c,t as q,$ as E,j as R,E as S,n as B,q as D,I as p,F as j}from"./frappe-ui-63c927c1.js";import Q from"./PurchaceSummary-458e8e66.js";import M from"./QuickLinks-9d3fd574.js";import A from"./BaseLayout-fcc95c5f.js";import O from"./TabButtons-0548b668.js";import{_ as L}from"./RequestList-2fc985b7.js";import{a as U}from"./axios-fc3df026.js";/* empty css                                                        */import"./index-1774bd7d.js";import"./notifications-4b74d839.js";/* empty css                                                   */import"./EmployeeAvatar-4a48dab5.js";import"./RequestActionSheet.vue_vue_type_style_index_0_scoped_5369b918_lang-f74cf9ac.js";import"./formatters-23b4eedd.js";const z={class:"flex flex-col items-center my-7 p-4 gap-7"},G={class:"w-full"},H={class:"w-full"},J={id:"receiptDetail",class:"flex flex-col gap-5 my-4 py-5 w-full"},K={class:"flex flex-col bg-white rounded"},W=["onClick"],X={class:"flex flex-row items-center gap-3 grow"},Y={class:"text-xs font-normal text-gray-800 leading-6"},Z={id:"circle"},ee={class:"flex justify-center gap-2"},te=["disabled"],ae=["disabled"],y=6,xe={__name:"ReceivePage",setup(k){const a=g("Pending Receipt");N(()=>{console.log("RequestPanel.vue is mounted")});const r=e=>{a.value=e,emit("tab-clicked",e)},s=g(1),m=[{title:"Print Stock Labels",route:"PrintLab"},{title:"Quality Inspection List",route:"QualityInspection"},{title:"Stock Entry List",route:"StockEntryList"}];let _=g([]);(()=>P(this,null,function*(){try{const e=yield U.get("/api/method/wms.api.my_api.get_purchase_receiptIII",{});_.value=e.data.message}catch(e){console.log("error while fetching data",error.response)}}))();const u=h(()=>{const e=_.value||[];return console.log("activeTab",a.value),a.value==="Pending Receipt"?e.filter(i=>i.status==="Draft"):a.value==="Completed Receipt"?e.filter(i=>i.status==="To Bill"):e}),o=h(()=>{const e=(s.value-1)*y,i=e+y;return u.value.slice(e,i).sort((v,f)=>f.name.localeCompare(v.name))}),l=h(()=>Math.ceil(u.value.length/y)),T=()=>{s.value<l.value&&s.value++},V=()=>{s.value>1&&s.value--},$=F(),I=e=>{$.push({name:"FormView",query:{linkName:e.name}})};return(e,i)=>{const v=C("Button"),f=C("router-link");return d(),x(A,{pageTitle:"Receive"},{body:b(()=>[t("div",z,[c(Q),c(M,{items:m,title:"Quick Links"}),t("div",G,[c(f,{to:{name:"FormView"}},{default:b(({navigate:n})=>[c(v,{onClick:n,variant:"solid",class:"w-full py-5 text-base font-bold"},{default:b(()=>[q(" New Purchase Receipt ")]),_:2},1032,["onClick"])]),_:1})]),t("div",H,[c(O,{buttons:[{label:"Pending Receipt"},{label:"Completed Receipt"}],modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=n=>a.value=n),onTabClicked:r},null,8,["modelValue"]),a.value==="Pending Receipt"?(d(),x(L,{key:0})):a.value==="Completed Receipt"?(d(),x(L,{key:1})):E("",!0)]),t("div",J,[t("div",K,[(d(!0),R(j,null,S(o.value,n=>(d(),R("div",{id:"basedOnActiveTabs",class:"flex flex-row flex-start p-4 items-center justify-between border-b",key:n.id,onClick:se=>I(n)},[t("div",X,[c(B(D),{name:"shopping-cart",class:"h-5 w-5 text-gray-500"}),t("div",Y,[t("p",null,p(n.name),1),t("p",null,p(n.posting_date),1)]),t("div",Z,p(n.status),1)]),c(B(D),{name:"chevron-right",class:"h-5 w-5 text-gray-500"})],8,W))),128))])]),t("div",ee,[t("button",{class:"paginationButton",onClick:V,disabled:s.value===1},"Prev",8,te),t("span",null,p(s.value)+" of "+p(l.value),1),t("button",{class:"paginationButton",onClick:T,disabled:s.value===l.value},"Next",8,ae)])])]),_:1})}}};export{xe as default};
