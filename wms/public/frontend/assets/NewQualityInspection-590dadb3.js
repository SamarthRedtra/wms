var g=(R,N,d)=>new Promise((i,_)=>{var c=u=>{try{f(d.next(u))}catch(m){_(m)}},b=u=>{try{f(d.throw(u))}catch(m){_(m)}},f=u=>u.done?i(u.value):Promise.resolve(u.value).then(c,b);f((d=d.apply(R,N)).next())});import{m as ae,r as o,q as se,b as te,w as le,u as F,o as p,d as e,s as n,v as r,i as h,j as S,t as w,F as k,g as ne,x as oe,e as T,y as E,z as y,f as ie}from"./index-c4230fc7.js";import ue from"./BaseLayout-e39ea2b2.js";import{a as x}from"./axios-fc3df026.js";import"./notifications-765e05d1.js";const re={class:"flex flex-col items-center"},de={class:"dropdown"},ce=e("label",null,"Inspection Type",-1),me={class:"dropdown"},pe=e("label",null,"Item Code",-1),_e={class:"dropdown"},ve=e("label",null,"Reference Type",-1),ge={class:"dropdown"},he=e("label",null,"Template",-1),ye={id:"searchTemplate"},be={id:"addSummary",class:"text-base leading-6 rounded border-none"},fe=e("p",null,"Quality Test",-1),we={id:"showdata",class:"flex flex-col gap-5 my-4"},xe={class:"flex flex-col bg-white rounded"},Ne={id:"basedOnActiveTabs",class:"flex flex-row flex-start p-4 items-center justify-between border-b"},qe={class:"flex gap-15 text-xs font-normal text-gray-800 leading-6"},Ve={id:"newStatus"},ke={id:"newReading"},Ce={key:0,class:"add-form"},Ie=e("br",null,null,-1),Se=e("label",{for:"itemName"},"Parameter",-1),Te={class:"barcode-input"},Ee=e("datalist",{id:"searchParameter"},[e("option")],-1),Re=e("br",null,null,-1),Be=e("label",{for:"itemName"},"Status",-1),De={class:"barcode-input"},Me=e("datalist",{id:"searchStatus"},[e("option",null," Rejected "),e("option",null," Accepted ")],-1),Ue=e("br",null,null,-1),Fe={class:"numericCheckDiv"},Oe=e("div",null,"Numeric",-1),Qe=e("br",null,null,-1),Ae={class:"numericCheckDiv"},Je=e("div",null,"Manual Inspection",-1),Pe=e("br",null,null,-1),je={class:"numericCheckDiv"},$e=e("div",null,"Formulae Based Criteria",-1),ze=e("br",null,null,-1),He={id:"formulaeReading"},Le=e("label",null,"Formalue Based",-1),Ge=e("br",null,null,-1),Ke=e("br",null,null,-1),We={id:"manualReading"},Xe=e("label",null,"Manual Reading",-1),Ye={class:"barcode-input"},Ze=e("br",null,null,-1),ea={id:"readingDiv"},aa={class:"barcode-input"},sa=e("br",null,null,-1),ta={class:"barcode-input"},la=e("br",null,null,-1),na=["for"],oa={class:"barcode-input"},ia=["id","onUpdate:modelValue"],ua=e("br",null,null,-1),ra=e("br",null,null,-1),da=e("br",null,null,-1),ca=e("br",null,null,-1),fa={__name:"NewQualityInspection",setup(R){const N=ae(),d=o(""),i=o(!0),_=o(!1),c=o(!1);d.value=N.query.qName;const b=o(!1),f=o([]),u=()=>g(this,null,function*(){b.value=!1}),m=()=>{b.value=!b.value},O=()=>{router.push({name:"QualityInspection"})},Q=o(""),A=()=>{B()},J=()=>{m(),B()};let q=o("New");const t=o([]),P=()=>g(this,null,function*(){try{const l=yield x.get("/api/method/wms.api.my_api.get_quality_details",{params:{quality_name:d.value}});t.value=l.data.message,t.value?(q.value=t.value.name,t.value.forEach(a=>{Q.value=a.purchase_order,f.value.push({itemCode:a.item_code,sample_size:a.sample_size,description:a.description})})):console.error("Invalid response data:",l.data)}catch(l){console.error("Error in quaility Inspection process:",l);try{const a=JSON.parse(l.response.data._server_messages),s=JSON.parse(a[0]);alert(s.message)}catch(a){console.error("Error parsing server message:",a)}}});se(()=>{N.query.qName&&P()});const j=o(""),V=o(1),B=()=>g(this,null,function*(){const l=document.getElementById("nameField").value,s=document.getElementById("minValue").value.value||t.value.readings[0].min_value,H=document.getElementById("maxValue").value.value||t.value.readings[0].max_value,L=document.getElementById("manualRead").value,G=document.getElementById("formulaeRead").value.value||t.value.readings[0].acceptance_formula,K=document.getElementById("wareHouseName").value.value||t.value.readings[0].status,W=i.value,X=_.value,Y=c.value,Z=d.value,U={};for(let v=1;v<=V.value;v++){const C=document.getElementById(`reading${v}`).value,I=`reading_${v}`;U[I]=C}const ee={specification:l,min_value:s,max_value:H,numeric:W,manual_inspection:X,formula_based_criteria:Y,readings:U,status:K,reading_value:L,acceptance_formula:G,qa_name:Z};try{(yield x.post("/api/method/wms.api.my_api.make_quality_inspection_reading",ee)).data.status==="success"||V.value<10&&(V.value+=1)}catch(v){const C=JSON.parse(v.response.data._server_messages),I=JSON.parse(C[0]);alert(I.message)}}),$=()=>g(this,null,function*(){try{const l={qa_name:q.value||d.value},a=yield x.post("/api/method/wms.api.my_api.submit_quality_inspections",l);j.value=a.data.message[0],alert(a.data.message.msg)}catch(l){console.error("Error in quality inspection process:",l);try{const a=JSON.parse(l.response.data._server_messages),s=JSON.parse(a[0]);alert(s.message)}catch(a){console.error("Error parsing server message:",a)}}});o("");const z=()=>g(this,null,function*(){try{const l=document.getElementById("selectTemp").value,a={qa_name:q.value||d.value,qa_temp:l.value||t.value.quality_inspection_template},s=yield x.post("/api/method/wms.api.my_api.edit_qa_inspection",a);alert(s.data.message.name&&s.data.message.msg)}catch(l){console.error("Error in quality inspection process:",l);try{const a=JSON.parse(l.response.data._server_messages),s=JSON.parse(a[0]);alert(s.message)}catch(a){console.error("Error parsing server message:",a)}}}),D=o([]);return(()=>g(this,null,function*(){try{const l=yield x.get("/api/method/wms.api.my_api.get_quality_template",{});D.value=l.data.message}catch(l){console.log("error::::",error.templateData)}}))(),(l,a)=>(p(),te(ue,{pageTitle:F(q),home:"award",onCartIconClick:O,class:"text-xs"},{body:le(()=>[e("div",re,[e("div",{onClick:u,id:"purchaseDate",class:"text-base leading-6 rounded w-full py-6 px-4 border-none"},[e("div",{id:"dropdownContainer",onClick:m},[e("div",de,[ce,n(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.inspection_type=s),class:"selectTag"},null,512),[[r,t.value.inspection_type]])]),e("div",me,[pe,n(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>t.value.item_code=s),class:"selectTag"},null,512),[[r,t.value.item_code]])]),e("div",_e,[ve,n(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>t.value.reference_type=s),class:"selectTag"},null,512),[[r,t.value.reference_type]])]),e("div",ge,[he,n(e("input",{list:"searchTemplate","onUpdate:modelValue":a[3]||(a[3]=s=>t.value.quality_inspection_template=s),class:"selectTag",id:"selectTemp"},null,512),[[r,t.value.quality_inspection_template]]),e("datalist",ye,[(p(!0),h(k,null,S(D.value,s=>(p(),h("option",null,w(s.name),1))),256))])])])]),e("div",be,[fe,ne(F(oe),{name:"plus",class:"h-6 w-6 text-black-500 cursor-pointer",onClick:m})]),e("div",we,[e("div",xe,[e("div",Ne,[e("div",{class:"flex flex-row items-center gap-3 grow cursor-pointer",onClick:m},[(p(!0),h(k,null,S(t.value.readings,s=>(p(),h("div",qe,[e("p",null,[T(" param: "),e("p",null,w(s.specification),1)]),e("span",null,[T(" status: "),e("p",Ve,w(s.status),1)]),e("span",null,[T("reading1: "),e("p",ke,w(s.reading_1),1)])]))),256))])])])]),b.value?(p(),h("div",Ce,[e("div",{onClick:u,id:"space"},[e("div",{onClick:u,id:"scrollerLine"})]),Ie,Se,e("div",Te,[n(e("input",{placeholder:"Enter Parameter",list:"searchParameter",id:"nameField","onUpdate:modelValue":a[4]||(a[4]=s=>t.value.readings[0].specification=s)},null,512),[[r,t.value.readings[0].specification]]),Ee]),Re,Be,e("div",De,[n(e("input",{list:"searchStatus",placeholder:"Add Status",id:"wareHouseName","onUpdate:modelValue":a[5]||(a[5]=s=>t.value.readings[0].status=s)},null,512),[[r,t.value.readings[0].status]]),Me]),Ue,e("div",Fe,[n(e("input",{type:"checkbox",id:"numericCheck","onUpdate:modelValue":a[6]||(a[6]=s=>i.value=s)},null,512),[[E,i.value]]),Oe]),Qe,e("div",Ae,[n(e("input",{type:"checkbox",id:"manualCheck","onUpdate:modelValue":a[7]||(a[7]=s=>_.value=s)},null,512),[[E,_.value]]),Je]),Pe,e("div",je,[n(e("input",{type:"checkbox",id:"formulaeCheck","onUpdate:modelValue":a[8]||(a[8]=s=>c.value=s)},null,512),[[E,c.value]]),$e]),ze,n(e("div",He,[Le,e("div",null,[n(e("input",{placeholder:"formulae ",id:"formulaeRead","onUpdate:modelValue":a[9]||(a[9]=s=>t.value.readings[0].acceptance_formula=s)},null,512),[[r,t.value.readings[0].acceptance_formula]])]),Ge],512),[[y,c.value]]),Ke,n(e("div",We,[Xe,e("div",Ye,[n(e("input",{type:"number",placeholder:"Manual Value",id:"manualRead","onUpdate:modelValue":a[10]||(a[10]=s=>t.value.readings[0].reading_value=s)},null,512),[[r,t.value.readings[0].reading_value]])]),Ze],512),[[y,_.value&&!i.value]]),n(e("div",ea,[n(e("label",null,"minimum value",512),[[y,i.value&&!c.value]]),n(e("div",aa,[n(e("input",{"onUpdate:modelValue":a[11]||(a[11]=s=>t.value.readings[0].min_value=s),placeholder:"min value",id:"minValue"},null,512),[[r,t.value.readings[0].min_value]])],512),[[y,i.value&&!c.value]]),sa,n(e("label",null,"maximum value",512),[[y,i.value&&!c.value]]),n(e("div",ta,[n(e("input",{"onUpdate:modelValue":a[12]||(a[12]=s=>t.value.readings[0].max_value=s),placeholder:"max value",id:"maxValue"},null,512),[[r,t.value.readings[0].max_value]])],512),[[y,i.value&&!c.value]]),la,(p(!0),h(k,null,S(V.value,s=>(p(),h(k,null,[e("label",{for:"reading"+s},"Reading "+w(s),9,na),e("div",oa,[n(e("input",{type:"number",id:"reading"+s,placeholder:"change quantity","onUpdate:modelValue":M=>t.value.readings[0]["reading_"+s]=M},null,8,ia),[[r,t.value.readings[0]["reading_"+s]]])]),ua],64))),256)),ra],512),[[y,i.value]]),da,e("div",{id:"saveSubmitBtn"},[e("button",{id:"addNew",onClick:A},"Submit and Add New"),ca,e("button",{id:"sub",onClick:J},"Submit ")])])):ie("",!0),e("div",{id:"btnDivII",class:"w-full flex justify-around sm:w-96 py-2 standalone:pb-safe-bottom"},[e("button",{id:"submitPurchaseReceipt",onClick:$},"Submit"),e("button",{id:"savePurchaseReceipt",onClick:z},"Save")])])]),_:1},8,["pageTitle"]))}};export{fa as default};
