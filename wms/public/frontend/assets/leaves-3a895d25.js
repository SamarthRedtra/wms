import{M as s}from"./frappe-ui-cec019df.js";import{n as r,e as o}from"./index-0e5fa8f2.js";const n=e=>e.map(a=>(a.leave_dates=p(a),a.doctype="Leave Application",a)),p=e=>e.from_date==e.to_date?r(e.from_date).format("D MMM"):`${r(e.from_date).format("D MMM")} - ${r(e.to_date).format("D MMM")}`,m=()=>{var e,a;return((a=(e=o)==null?void 0:e.data)==null?void 0:a.name)||"unknown"},c=()=>{var e,a;return((a=(e=o)==null?void 0:e.data)==null?void 0:a.user_id)||"unknown"},i=s({url:"wms.api.get_leave_applications",params:{employee:m(),limit:5},auto:!0,cache:"wms:my_leaves",transform(e){return n(e)},onSuccess(){u.reload()}}),f=s({url:"wms.api.get_leave_applications",params:{employee:m(),approver_id:c(),for_approval:1,limit:5},auto:!0,cache:"wms:team_leaves",transform(e){return n(e)}}),u=s({url:"wms.api.get_leave_balance_map",params:{employee:m()},auto:!0,cache:"wms:leave_balance",transform:e=>Object.fromEntries(Object.entries(e).map(([a,t])=>(t.balance_percentage=t.balance_leaves/t.allocated_leaves*100,[a,t])))});export{p as g,u as l,i as m,f as t};
